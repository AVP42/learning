# 协议的层次以及他们的服务类型

## 3种模型

* 定义：
  * OSI模型，Open System Interconnection Model,   开发式系统互连参考模型。
    是由国际标准化组织ISO提出的一种标准，没有考虑到具体的时长需求。
  * TCP/IP模型， 面向市场应用的模型，4层模型
    * 由于应用层，表示层和会话层，都是应用程序内部来实现的，程序与程序之间几乎是无法实现代码的抽象共享的，因此很难实现应用程序维度的分层。比如表示层中数据压缩，加密不算是一种协议，而且会话层也很难使用协议来进行描述，所以整合在一起，交给应用程序开发者来实现。
  * TCP/IP 五层模型，结合上面的优点，5层模型。仅仅是逻辑分层，实际应用还是4层模型。

| 层次 | OSI<br />7层模型          | TCP/IP<br />4层模型 | TCP/IP <br />5层模型 | 作用                                                         | 数据单元                      | 实例                                                         |
| ---- | ------------------------- | ------------------- | -------------------- | ------------------------------------------------------------ | ----------------------------- | ------------------------------------------------------------ |
| 7    | 应用层<br />Application   | 应用层              | 应用层               | 定义**应用程序**之间交互的规则                               | 报文<br />message             | 1.域名系统DNS 使用HTTP协议来 完成万维网应用之间的交互<br />2. 电子邮件系统 使用STMP协议来 来完成邮件收发<br />HTTP, FTP,  TFTP,  NFS,  WAIS,  SMTP,  Telnet,  DNS,  SNMP |
| 6    | 表示层<br />Presentation  | 应用层              | 应用层               | 用于**数据加解密，数据压缩与解压，数据描述**<br />屏蔽了应用程序数据在不同操作系统中表示和存储的差异 | 报文                          | GIF, JPEG,PICT,TIFF                                          |
| 5    | 会话层<br />Session       | 应用层              | 应用层               | 用于**建立，管理，终止通信会话**。<br />提供了数据交换和同步的功能，包括建立检查点和恢复方案的方法 | 报文                          | RPC,  SQL,  NFS,  NETBIOS, names,  AppleTalk                 |
| 4    | 传输层<br />Transport     | 传输层              | 传输层               | 负责**交换报文**，为会话提供通信功能.<br />多个应用程序可复用传输层，传输层可分发数据到上一层 | 段segment<br />数据报datagram | 数据传输控制协议TCP<br />用户数据报协议UDP                   |
| 3    | 网络层<br />Network       | 网络层              | 网络层               | 提供寻址和分段功能。用于选择合适的**网间路由**和**交换节点** | 分组/包<br />packet           | 网际协议IP<br />互联网组管理协议IGMP<br />互联网控制报文协议ICMP<br /><br />地址解析协议ARP<br />逆地址解析协议RARP<br />路由信息协议RIP<br />互联网分组交换协议IPX |
| 2    | 数据链路层<br />Data Link | 网络<br />接入层    | 数据链路层           | 控制数据传输，<br />包括**透明传输(**准确标记帧的起始和终止)<br />和**差错检测**(循环冗余检查CRC) | 帧frame                       | **PPP协议(点对点协议)**<br />FDDI, Frame Relay, HDLC, SLIP<br />涉及软件或者硬件：网络适配器 |
| 1    | 物理层<br />Pysical       | 网络<br />接入层    | 物理层               | 用于**比特流**的透明传送<br />屏蔽了传输介质与物理设备的差异 | 比特流bit                     | EIA/TIA-232, EIA/TIA-499, V.35, **802.3**<br />涉及软件或者硬件：光纤，双绞线 |

* 对比：
  * 相同点：
    * 分层
    * 两种通信服务方式，面向连接，无连接
  * 不同点：
    * OSI 7层，TCP/IP 4层。TCP/IP 实现起来更加简易
    * OSI 先定义了分层模型，再定义协议规范；TCP/IP 相反，所以不支持非TCP/IP网络
    * OSI 对数据链路和物理层做了区分；TCP/IP 没有对网络接入层进行细分，只是概念描述

* 数据在各层之间的传输(简易版)

  ```sequence
  应用层->传输层:  应用程序报文
  传输层->网络层: 首部(源端口，目标端口，\n差错检测位等) + 应用程序报文
  网络层->数据链路层: 首部(源地址，目标地址)\n + 传输层数据报
  数据链路层->物理层: 首部(源MAC，目标MAC)\n + 网络层分组
  物理层->对端主机: 比特流
  
  ```

  



